<!DOCTYPE html>
<html>
<head>
  <title>Ask bjlkeng bot</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f5f5f5;
      color: #333;
      padding: 20px;
      text-align: center;
    }
  
    h1 {
      color: #007bff;
    }
  
    .container {
      margin: 0 auto;
      max-width: 700px;
    }
  
    .input-group {
      margin-bottom: 20px;
    }
  
    .input-group input[type="text"] {
      padding: 10px;
      width: 100%;
      border: none;
      border-radius: 4px;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
    }
  
    .input-group button {
      padding: 10px 20px;
      border: none;
      background-color: #007bff;
      color: #fff;
      border-radius: 4px;
      cursor: pointer;
    }
  
    .input-group button:hover {
      background-color: #0056b3;
    }

    .result-box {
      border: 1px solid #ccc;
      background-color: #fff;
      padding: 20px;
      margin-bottom: 20px;
      text-align: left;
      position: relative;
    }

    .loading {
      animation: spin 2s linear infinite;
      position: relative;
      top: 50%; /* Position at the center vertically */
      left: 50%; /* Position at the center horizontally */
      transform: translate(-50%, -50%); /* Center the element */
      border: 8px solid transparent; /* Adjust border width */
      border-top: 8px solid #3498db; /* Blue */
      border-radius: 50%;
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% {
        transform: translate(-50%, -50%) rotate(0deg); /* Apply translation and rotation */
      }
      100% {
        transform: translate(-50%, -50%) rotate(360deg); /* Apply translation and rotation */
      }
    } 
  </style>
</head>
<body>
  <h1>Ask the BJLKeng Bot</h1>
  <div class="container">
    <div class="input-group">
      <input type="text" id="query" placeholder="Enter your question" onkeydown="handleKeyDown(event)"/>
      <button id="submitButton" onclick="askBot()">Ask</button>
    </div>
    <div class="container">
      <div id="result" class="result-box"></div>
    </div>
  </div>

  <script>
    function handleKeyDown(event) {
      if (event.keyCode === 13) { // 13 is the key code for Enter
        event.preventDefault(); // Prevent form submission
        askBot();
      }
    }

    function askBot() {
      const queryBox = document.getElementById('query');
      const apiUrl = `https://bjlkengbot.bjlkeng.io/api?query=${encodeURIComponent(queryBox.value)}`;
      const submitButton = document.getElementById('submitButton');
      const resultBox = document.getElementById('result');

      resultBox.textContent = '';
      resultBox.classList.add('loading'); 
      queryBox.disabled = true;
      submitButton.disabled = true; 

      // Perform API request using the fetched query parameter
      fetch(apiUrl)
        .then(response => response.json())
        .then(data => {
          resultBox.classList.remove('loading');
          queryBox.disabled = false;
          submitButton.disabled = false;

          const answer = data.text;
          resultBox.textContent = JSON.stringify(answer, null, 2);
        })
        .catch(error => {
          console.error(error);
          resultBox.value = `error: ${error}`;
        });
    }
  </script>
</body>
</html>